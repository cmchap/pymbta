<!DOCTYPE html>
<html lang="en" ng-app='MBTAApp'>
	<head>
		<meta charset="utf-8">
	    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	    <meta name="viewport" content="width=device-width, initial-scale=1">
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.6.0/moment.min.js"></script>
		<link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
		<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
		<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.10/angular.min.js"></script>
		<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.10/angular-cookies.min.js"></script>
		<script src="/static/js/angularLocalStorage.js"></script>
		<script src="/static/js/app.js"></script>
	</head>
	<body ng-controller='MBTACtrl' style='text-align: center;'>
	    <div class="container">
	    	<h1>Nearby T Info</h1>
	    	<div>
	    		<form role="form">
	    			<div ng-show='!hidden'>
		    			<div class="form-group">
							<label>Offset (Hours)</label>
							<input class="form-control" type="number" ng-model='args.offset'>
						</div>
						<div class="form-group">
							<label>Direction</label>
							<input class="form-control" type="text" ng-model='args.direction'>
						</div>
						<div class="form-group">
							<label>Line</label>
							<input class="form-control" type="text" ng-model='args.line'>
						</div>
					</div>
					<div class="form-group">
						<button type='button' ng-click='hidden = !hidden' ng-show='hidden' class='btn btn-default' style='width:100%'>Advanced Search</button>
					</div>
					<div class="form-group">
						<button type='button' ng-click='go()' class='btn btn-default' style='width:100%'>Go!</button>
					</div>
				</form>
			</div>
			<hr>
			<h2>Nearest Stop</h2>
			<div ng-show='stop.stop_id'>
				<p>
					{{getName(stop)}}
					<br>
					<span ng-switch='(stop.distance*1.60934) > 1'>
						<span ng-switch-when='true'>
							({{ getDistance(stop) }} kilometers away)
						</span>
						<span ng-switch-when='false'>
							({{ getDistance(stop) }} meters away)
						</span>
					</span>
				</p>
				<p>
					<a type='button' target='_blank' href="http://maps.google.com/?q={{getName(stop)}}" class='btn btn-default'>Map!</a>
				</p>
			</div>
			<div ng-show='!stop.stop_id'>
				<p>No nearby T stops.</p>
			</div>
			<hr>
			<h2>
				Next
				<ng-pluralize count='trains.all_trains.length' when="{'1': 'Train', 'other': 'Trains'}"></ng-pluralize>
			</h2>
			<div ng-show='trains.all_trains'>
				<div ng-repeat='trains in trains.all_trains' style='margin: 15px 0;'>
					<h4>
						{{trains.trains.length}} {{trains.route_name}}
						<ng-pluralize count='trains.trains.length' when="{'1': 'Train', 'other': 'Trains'}"></ng-pluralize>
					</h4>
					<h5>
						{{trains.headsign}}
					</h5>
					<div ng-repeat='train in trains.trains' style='border-style: dotted; border-color: {{getColor(trains)}}; margin: 10px 0;'>
						<p>
							{{train.direction_name}}
							<br>
							{{getArrivalTime(train)}}
							<br>
							<small ng-bind-html="tripDetails(train)"></small>
						</p>
					</div>
				</div>
			</div>
			<div ng-show='!trains.all_trains'>
				<p>No upcoming trains.</p>
			</div>
			<hr>
			<footer>
				<p ng-show='updated'>Last updated at {{updated}}</p>
			</footer>
	    </div><!-- /.container -->
	</body>
</html>